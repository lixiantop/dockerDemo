# ğŸ³ Docker å­¦ä¹ ç¤ºä¾‹é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºå­¦ä¹ Dockerè€Œè®¾è®¡çš„Node.jsåº”ç”¨ç¨‹åºï¼ŒåŒ…å«å®Œæ•´çš„å®¹å™¨åŒ–é…ç½®å’Œæœ€ä½³å®è·µç¤ºä¾‹ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®åŒ…å«ï¼š
- ä¸€ä¸ªç®€å•çš„Node.js + Express Webåº”ç”¨ç¨‹åº
- å®Œæ•´çš„Dockeré…ç½®æ–‡ä»¶
- Docker Composeå¤šå®¹å™¨é…ç½®
- Nginxåå‘ä»£ç†é…ç½®
- å¥åº·æ£€æŸ¥å’Œç›‘æ§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶
- å®‰è£…Docker Desktop
- å®‰è£…Node.jsï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼Œå¯é€‰ï¼‰

### æ–¹æ³•1ï¼šä½¿ç”¨Dockerè¿è¡Œ

#### æ„å»ºå¹¶è¿è¡Œå•ä¸ªå®¹å™¨
```bash
# æ„å»ºDockeré•œåƒ
docker build -t docker-demo .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --name my-docker-demo docker-demo

# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps

# è®¿é—®åº”ç”¨ç¨‹åº
# æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000
```

#### ä½¿ç”¨Docker Composeè¿è¡Œï¼ˆæ¨èï¼‰
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåº”ç”¨ç¨‹åº + Nginxï¼‰
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ–¹æ³•2ï¼šæœ¬åœ°å¼€å‘è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨åº”ç”¨ç¨‹åº
npm start

# è®¿é—®åº”ç”¨ç¨‹åº
# æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
dockerDemo/
â”œâ”€â”€ app.js                 # ä¸»åº”ç”¨ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ package.json           # Node.jsé¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile             # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # å¤šå®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ nginx.conf             # Nginxé…ç½®æ–‡ä»¶
â”œâ”€â”€ .dockerignore          # Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ .github/
    â””â”€â”€ copilot-instructions.md  # GitHub CopilotæŒ‡ä»¤
```

## ğŸ¯ å­¦ä¹ è¦ç‚¹

### 1. Dockerfile æœ€ä½³å®è·µ
- ä½¿ç”¨è½»é‡çº§åŸºç¡€é•œåƒï¼ˆAlpine Linuxï¼‰
- å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°
- ä½¿ç”¨érootç”¨æˆ·è¿è¡Œåº”ç”¨ï¼ˆå®‰å…¨æ€§ï¼‰
- æ·»åŠ å¥åº·æ£€æŸ¥
- åˆç†ä½¿ç”¨ç¼“å­˜å±‚

### 2. Docker Compose é…ç½®
- æœåŠ¡ç¼–æ’å’Œä¾èµ–ç®¡ç†
- ç½‘ç»œé…ç½®
- å·æŒ‚è½½
- ç¯å¢ƒå˜é‡ç®¡ç†
- å¥åº·æ£€æŸ¥é…ç½®

### 3. å®‰å…¨æœ€ä½³å®è·µ
- érootç”¨æˆ·è¿è¡Œ
- æœ€å°æƒé™åŸåˆ™
- é•œåƒæ¼æ´æ‰«æ
- ç¯å¢ƒå˜é‡ä¿æŠ¤

## ğŸ”§ å¸¸ç”¨Dockerå‘½ä»¤

### é•œåƒæ“ä½œ
```bash
# æŸ¥çœ‹æœ¬åœ°é•œåƒ
docker images

# åˆ é™¤é•œåƒ
docker rmi docker-demo

# æ„å»ºé•œåƒï¼ˆå¸¦æ ‡ç­¾ï¼‰
docker build -t docker-demo:v1.0 .
```

### å®¹å™¨æ“ä½œ
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -a

# åœæ­¢å®¹å™¨
docker stop my-docker-demo

# åˆ é™¤å®¹å™¨
docker rm my-docker-demo

# è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨
docker exec -it my-docker-demo sh

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs my-docker-demo
```

### ç³»ç»Ÿæ¸…ç†
```bash
# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker image prune

# æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨
docker container prune

# æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

## ğŸŒ APIç«¯ç‚¹

åº”ç”¨ç¨‹åºæä¾›ä»¥ä¸‹ç«¯ç‚¹ï¼š

- `GET /` - ä¸»é¡µé¢ï¼ˆåŒ…å«åº”ç”¨ä¿¡æ¯ï¼‰
- `GET /api/info` - åº”ç”¨ç¨‹åºä¿¡æ¯API
- `GET /health` - å¥åº·æ£€æŸ¥ç«¯ç‚¹

## ğŸ“Š ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹åº”ç”¨ç¨‹åºçŠ¶æ€
```bash
# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:3000/health

# è·å–åº”ç”¨ä¿¡æ¯
curl http://localhost:3000/api/info
```

### å®¹å™¨ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
docker stats

# æŸ¥çœ‹å®¹å™¨è¿›ç¨‹
docker top my-docker-demo
```

## ğŸ“ æ‰©å±•å­¦ä¹ 

1. **å¤šé˜¶æ®µæ„å»º**: å°è¯•åˆ›å»ºä¸€ä¸ªåŒ…å«æ„å»ºå’Œè¿è¡Œé˜¶æ®µçš„Dockerfile
2. **æ•°æ®å·**: æ·»åŠ æ•°æ®æŒä¹…åŒ–å­˜å‚¨
3. **ç¯å¢ƒé…ç½®**: åˆ›å»ºä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶
4. **å®¹å™¨ç¼–æ’**: å­¦ä¹ Kuberneteséƒ¨ç½²
5. **CI/CDé›†æˆ**: æ·»åŠ è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -an | findstr :3000
   # æˆ–ä½¿ç”¨ä¸åŒç«¯å£
   docker run -d -p 3001:3000 --name my-docker-demo docker-demo
   ```

2. **é•œåƒæ„å»ºå¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ„å»ºæ—¥å¿—
   docker build -t docker-demo . --no-cache --progress=plain
   ```

3. **å®¹å™¨æ— æ³•å¯åŠ¨**
   ```bash
   # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
   docker logs my-docker-demo
   ```

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜å’Œæ”¹è¿›å»ºè®®ï¼

---

**å¿«ä¹å­¦ä¹ Dockerï¼** ğŸ³âœ¨
